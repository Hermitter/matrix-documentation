<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>ESP32 - MATRIX</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">MATRIX</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Overview</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX Creator <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../matrix-creator/overview/">Overview</a>
</li>
                                    
<li >
    <a href="../../matrix-creator/device-setup/">Device Setup</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Resources</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-creator/resources/overview/">Overview</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/pinout/">Pinout</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/microphone/">Microphones</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/reference-models/">Reference Models</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/system-architecture/">System Architecture</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/technical-datasheets/">Technical Datasheets</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/mcu/">MCU</a>
</li>
            
<li >
    <a href="../../matrix-creator/resources/fpga/">FPGA</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../matrix-creator/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX Voice <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../overview/">Overview</a>
</li>
                                    
<li >
    <a href="../device-setup/">Device Setup</a>
</li>
                                    
<li class="active">
    <a href="./">ESP32</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Resources</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../resources/overview/">Overview</a>
</li>
            
<li >
    <a href="../resources/pinout/">Pinout</a>
</li>
            
<li >
    <a href="../resources/microphone/">Microphones</a>
</li>
            
<li >
    <a href="../resources/reference-models/">Reference Models</a>
</li>
            
<li >
    <a href="../resources/system-architecture/">System Architecture</a>
</li>
            
<li >
    <a href="../resources/technical-datasheets/">Technical Datasheets</a>
</li>
            
<li >
    <a href="../resources/fpga/">FPGA</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX OS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../matrix-os/overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-os/getting-started/">Index</a>
</li>
            
<li >
    <a href="../../matrix-os/getting-started/installation/">Installation</a>
</li>
            
<li >
    <a href="../../matrix-os/getting-started/applications/">Applications</a>
</li>
            
<li >
    <a href="../../matrix-os/getting-started/publishing/">Publishing Apps</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Reference</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-os/reference/">Index</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/sensors/">Sensors</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/leds/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/configuration/">Config.yaml</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/cli-tool/">CLI Tool</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/dashboard/">Dashboard</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/widgets/">Widgets</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/crosstalk/">Cross Talk</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/data-types/">Data Types</a>
</li>
            
<li >
    <a href="../../matrix-os/reference/system/">System Methods</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-os/examples/">Examples</a>
</li>
            
<li >
    <a href="../../matrix-os/examples/dash-create/">Dashboard</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../matrix-os/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX CORE <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../matrix-core/overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-core/getting-started/">Index</a>
</li>
            
<li >
    <a href="../../matrix-core/getting-started/core-installation/">Installation</a>
</li>
            
<li >
    <a href="../../matrix-core/getting-started/understanding-core/">Understanding CORE</a>
</li>
            
<li >
    <a href="../../matrix-core/getting-started/javascript-installation/">Javascript Setup</a>
</li>
            
<li >
    <a href="../../matrix-core/getting-started/python-installation/">Python Setup</a>
</li>
            
<li >
    <a href="../../matrix-core/getting-started/golang-installation/">Golang Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Driver Protocols</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-core/protocols/">Index</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/imu/">IMU</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/uv/">UV</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/servo/">Servo</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../matrix-core/protocols/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Javascript Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-core/javascript-examples/">Index</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/servo/">Servo</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../matrix-core/javascript-examples/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Python Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-core/python-examples/">Index</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/servo/">Servo</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../matrix-core/python-examples/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../matrix-core/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX HAL <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../matrix-hal/overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-hal/getting-started/">Index</a>
</li>
            
<li >
    <a href="../../matrix-hal/getting-started/installation-package/">Installation From Package</a>
</li>
            
<li >
    <a href="../../matrix-hal/getting-started/installation-source/">Installation From Source</a>
</li>
            
<li >
    <a href="../../matrix-hal/getting-started/programs/">Compiling Programs</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">References</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-hal/reference/">Index</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/imu/">IMU</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/uv/">UV</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../matrix-hal/reference/microphone/">Microphone</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../matrix-hal/examples/">Index</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../matrix-hal/examples/microphone/">Microphone</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../matrix-hal/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../help/">Support</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../device-setup/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../resources/overview/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#esp32-setup">ESP32 Setup</a></li>
        <li class="main "><a href="#step-1-raspberry-pi-setup">Step 1: Raspberry Pi Setup</a></li>
        <li class="main "><a href="#step-2-personal-computer-setup">Step 2: Personal Computer Setup</a></li>
        <li class="main "><a href="#step-3-build-and-deploy">Step 3: Build and Deploy</a></li>
        <li class="main "><a href="#step-4-finishing-up">Step 4: Finishing Up</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="esp32-setup">ESP32 Setup</h2>
<p>This guide will show you how to get started with the ESP32 module on the MATRIX Voice ESP32 version.</p>
<h2 id="step-1-raspberry-pi-setup">Step 1: Raspberry Pi Setup</h2>
<p>Run the following commands inside your Raspberry Pi terminal to install the MATRIX Voice Software. This will keep the FPGA firmware updated and install few tools to flash the ESP-WROOM-32.</p>
<p>Add the MATRIX repository and key.</p>
<pre><code class="language-bash">curl https://apt.matrix.one/doc/apt-key.gpg | sudo apt-key add -
echo &quot;deb https://apt.matrix.one/raspbian $(lsb_release -sc) main&quot; | sudo tee /etc/apt/sources.list.d/matrixlabs.list
</code></pre>

<p>Update your repository and packages.</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get upgrade
</code></pre>

<p>Install the MATRIX init package.</p>
<pre><code class="language-bash">sudo apt install matrixio-creator-init
</code></pre>

<p>Reboot your Raspberry Pi.</p>
<pre><code class="language-bash">sudo reboot
</code></pre>

<h2 id="step-2-personal-computer-setup">Step 2: Personal Computer Setup</h2>
<p>Here we're installing the requirements needed to allow your pc to develop and compile ESP32 projects.</p>
<p><b>Install Git:</b></p>
<ul>
<li><a href="https://git-scm.com/downloads" target="_blank">https://git-scm.com/downloads</a></li>
</ul>
<p><b>Install ESP32 toolchain:</b></p>
<ul>
<li>Linux: <a href="https://esp-idf.readthedocs.io/en/latest/get-started/linux-setup.html" target="_blank">https://esp-idf.readthedocs.io/en/latest/get-started/linux-setup.html</a></li>
<li>Mac: <a href="https://esp-idf.readthedocs.io/en/latest/get-started/macos-setup.html" target="_blank">https://esp-idf.readthedocs.io/en/latest/get-started/macos-setup.html</a></li>
<li>Windows: <a href="https://esp-idf.readthedocs.io/en/latest/get-started/windows-setup.html" target="_blank">https://esp-idf.readthedocs.io/en/latest/get-started/windows-setup.html</a>(currently not functioning)</li>
<li>Stop Following when you reach "Next Steps"</li>
</ul>
<p><b>Setup ESP-IDF development framework:</b></p>
<ul>
<li>Download ESP-IDF: <a href="https://esp-idf.readthedocs.io/en/latest/get-started/index.html#get-esp-idf" target="_blank">https://esp-idf.readthedocs.io/en/latest/get-started/index.html#get-esp-idf</a></li>
<li>Set ESP-IDF Path: <a href="https://esp-idf.readthedocs.io/en/latest/get-started/add-idf_path-to-profile.html" target="_blank">https://esp-idf.readthedocs.io/en/latest/get-started/add-idf_path-to-profile.html</a></li>
</ul>
<p><b>Clone MATRIX Voice ESP32 repository</b></p>
<p>This repository contains the necessary libraries to control the MATRIX Voice's components.</p>
<pre><code class="language-bash"># windows must be using MINGw32 terminal from toolchain step
git clone https://github.com/matrix-io/matrixio_hal_esp32.git
</code></pre>

<h2 id="step-3-build-and-deploy">Step 3: Build and Deploy</h2>
<p>Here we will be deploying and running one of the example apps in the Repository we just downloaded.</p>
<p><b>Configuring IDF (one time setup):</b></p>
<pre><code class="language-bash">cd matrixio_hal_esp32/examples/mic_energy/
make menuconfig
</code></pre>

<p><img alt="" src="../img/esp32-1.jpg" /></p>
<p>You will now be taken to the IDF Configuration screen, as shown above. Once there, select the <Exit> option to save default configuration.</p>
<p><b>Running example project:</b></p>
<p>To finish running the example, all that's left is to make and deploy the code to the Raspberry Pi. This requires the Pi's IP address and you will be prompted to insert the Pi's password as well.</p>
<pre><code class="language-bash">export RPI_HOST=pi@RASPBERRY_IP_ADDRESS
make deploy
</code></pre>

<h2 id="step-4-finishing-up">Step 4: Finishing Up</h2>
<p><img alt="" src="../img/esp32-2.gif" /></p>
<p>Your MATRIX Voice ESP32 should now be running the deployed example. With the program properly flashed in the ESP32, the Voice can now run without the Pi if you choose to do so. Ensure the MATRIX Voice and Pi are not powered before connecting or disconnecting.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
