<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Understanding CORE - MATRIX</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">MATRIX</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../..">Overview</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX Creator <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../matrix-creator/overview/">Overview</a>
</li>
                                    
<li >
    <a href="../../../matrix-creator/device-setup/">Device Setup</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Resources</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-creator/resources/overview/">Overview</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/pinout/">Pinout</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/microphone/">Microphones</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/reference-models/">Reference Models</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/system-architecture/">System Architecture</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/technical-datasheets/">Technical Datasheets</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/mcu/">MCU</a>
</li>
            
<li >
    <a href="../../../matrix-creator/resources/fpga/">FPGA</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../matrix-creator/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX Voice <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../matrix-voice/overview/">Overview</a>
</li>
                                    
<li >
    <a href="../../../matrix-voice/device-setup/">Device Setup</a>
</li>
                                    
<li >
    <a href="../../../matrix-voice/esp32/">ESP32</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Resources</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-voice/resources/overview/">Overview</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/pinout/">Pinout</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/microphone/">Microphones</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/reference-models/">Reference Models</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/system-architecture/">System Architecture</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/technical-datasheets/">Technical Datasheets</a>
</li>
            
<li >
    <a href="../../../matrix-voice/resources/fpga/">FPGA</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../matrix-voice/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX OS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../matrix-os/overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-os/getting-started/">Index</a>
</li>
            
<li >
    <a href="../../../matrix-os/getting-started/installation/">Installation</a>
</li>
            
<li >
    <a href="../../../matrix-os/getting-started/applications/">Applications</a>
</li>
            
<li >
    <a href="../../../matrix-os/getting-started/publishing/">Publishing Apps</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Reference</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-os/reference/">Index</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/sensors/">Sensors</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/leds/">Everloop</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/configuration/">Config.yaml</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/cli-tool/">CLI Tool</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/dashboard/">Dashboard</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/widgets/">Widgets</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/crosstalk/">Cross Talk</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/data-types/">Data Types</a>
</li>
            
<li >
    <a href="../../../matrix-os/reference/system/">System Methods</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-os/examples/">Examples</a>
</li>
            
<li >
    <a href="../../../matrix-os/examples/dash-create/">Dashboard</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../matrix-os/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX CORE <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../">Index</a>
</li>
            
<li >
    <a href="../core-installation/">Installation</a>
</li>
            
<li class="active">
    <a href="./">Understanding CORE</a>
</li>
            
<li >
    <a href="../javascript-installation/">Javascript Setup</a>
</li>
            
<li >
    <a href="../python-installation/">Python Setup</a>
</li>
            
<li >
    <a href="../golang-installation/">Golang Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Driver Protocols</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../protocols/">Index</a>
</li>
            
<li >
    <a href="../../protocols/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../protocols/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../protocols/imu/">IMU</a>
</li>
            
<li >
    <a href="../../protocols/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../protocols/uv/">UV</a>
</li>
            
<li >
    <a href="../../protocols/servo/">Servo</a>
</li>
            
<li >
    <a href="../../protocols/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../protocols/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Javascript Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../javascript-examples/">Index</a>
</li>
            
<li >
    <a href="../../javascript-examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../javascript-examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../javascript-examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../javascript-examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../javascript-examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../javascript-examples/servo/">Servo</a>
</li>
            
<li >
    <a href="../../javascript-examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../javascript-examples/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Python Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../python-examples/">Index</a>
</li>
            
<li >
    <a href="../../python-examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../python-examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../python-examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../python-examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../python-examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../python-examples/servo/">Servo</a>
</li>
            
<li >
    <a href="../../python-examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../python-examples/wakeword/">Wakeword</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">MATRIX HAL <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../matrix-hal/overview/">Overview</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Getting Started</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-hal/getting-started/">Index</a>
</li>
            
<li >
    <a href="../../../matrix-hal/getting-started/installation-package/">Installation From Package</a>
</li>
            
<li >
    <a href="../../../matrix-hal/getting-started/installation-source/">Installation From Source</a>
</li>
            
<li >
    <a href="../../../matrix-hal/getting-started/programs/">Compiling Programs</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">References</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-hal/reference/">Index</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/imu/">IMU</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/uv/">UV</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../../matrix-hal/reference/microphone/">Microphone</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Examples</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../matrix-hal/examples/">Index</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/everloop/">Everloop</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/humidity/">Humidity</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/imu/">IMU</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/pressure/">Pressure</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/uv/">UV</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/gpio/">GPIO</a>
</li>
            
<li >
    <a href="../../../matrix-hal/examples/microphone/">Microphone</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../matrix-hal/troubleshooting/">Troubleshooting</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../../help/">Support</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../core-installation/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../javascript-installation/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#overview">Overview</a></li>
        <li class="main "><a href="#ports-protocol">Ports &amp; Protocol</a></li>
        <li class="main "><a href="#next-steps">Next Steps</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="overview">Overview</h2>
<p>MATRIX CORE functions by sending and receiving <a href="https://developers.google.com/protocol-buffers/" target="_blank">Protocol Buffers</a> over a <a href="http://zeromq.org/" target="_blank">ZeroMQ</a> connection. This can be used to query sensors and control any MATRIX device from any language that supports Protocol Buffers (version 3.X) and ZeroMQ. This is the basis for how the <a href="/matrix-os/overview.md">MATRIX OS</a> layer can communicate with your MATRIX device. </p>
<p><img alt="" src="/matrix-core/img/core-flow.jpg" /></p>
<h2 id="ports-protocol">Ports &amp; Protocol</h2>
<p>MATRIX CORE contains drivers (components &amp; sensors) that communicate with your MATRIX device. This occurs by having each driver send or receive Protocol Buffers over a ZeroMQ driver port. Depending on the driver port it may allow for <strong>read-only</strong>, <strong>write-only</strong> or <strong>read-write</strong>.</p>
<p><strong>Current Driver Base Ports:</strong></p>
<ul>
<li><code>IMU</code> - <strong>20013</strong></li>
<li><code>Humidity</code> - <strong>20017</strong></li>
<li><code>Everloop</code> - <strong>20021</strong></li>
<li><code>Pressure</code> - <strong>20025</strong></li>
<li><code>UV</code> - <strong>20029</strong>
<!-- * <code>ZigbeeBulb</code> - **40001** -->
<!-- * <code>MicArray_Alsa</code> - **20037** --></li>
<li><code>Servo</code> - <strong>20045</strong></li>
<li><code>GPIO</code> - <strong>20049</strong></li>
<li><code>Wakeword</code> - <strong>60001</strong></li>
</ul>
<p>Each driver reserves 4 ports beginning with their <code>base port</code> as shown above. The other 3 ports are in sequential order counting up from the <code>base port</code>. Below is an example of all IMU ports. Note, not all drivers utilize every port.</p>
<p><strong>All IMU Ports</strong></p>
<ul>
<li><code>IMU Base Port</code> - <strong>20013</strong></li>
<li><code>IMU Keep-Alive Port</code> - <strong>20014</strong></li>
<li><code>IMU Error Port</code> - <strong>20015</strong></li>
<li><code>IMU Data Update Port</code> - <strong>20016</strong></li>
</ul>
<p>The following list contains the port types currently defined in MATRIX CORE.
<!-- BASE PORT -->
<details open>
<summary style="font-size: 1.75rem; font-weight: 300;">Base Port</summary>
The <code>base port</code> is used to configure a driver on your MATRIX device. This port is a <code>ZeroMQ PULL port</code> that accepts a configuration which is created as a protocol buffer.</p>
<p>To send a configuration you need to create a valid message for each driver. For example, the UV driver uses a configuration message to set the refresh rate and timeout for sending UV data.</p>
<p>Configuration messages are named <code>DriverConfig</code>. The file for where this is defined can be seen <a href="https://github.com/matrix-io/protocol-buffers/blob/master/matrix_io/malos/v1/io.proto" target="_blank">here</a>.</p>
<p>Below is an example for a UV configuration message:</p>
<pre><code class="language-protobuf">message DriverConfig {
  // Delay between updates. In seconds.
  float delay_between_updates = 1;
  // Timeout after last ping.
  float timeout_after_last_ping = 2;
}
</code></pre>

<p>Once the <code>DriverConfig</code> message is filled out, it needs to be serialized as a string and sent to the ZeroMQ configuration port.
</details>
<!-- KEEP-ALIVE PORT -->
<details open>
<summary style="font-size: 1.75rem; font-weight: 300;">Keep-alive Port</summary>
<code>Port</code>: <code>base port</code> + 1</p>
<p>The Keep-alive port is a <code>ZeroMQ PULL port</code> that is required for certain drivers to keep their function alive. Drivers that are pushing data need this in place to let it know if data will continue to be requested. For example, the Everloop driver doesn't require Keep-alive messages, but the Humidity driver does. Any message that is sent to the Keep-alive port will be discarded, so an empty string <code>""</code> makes for a good Keep-alive message.</p>
<p></details>
<!-- ERROR PORT -->
<details open>
<summary style="font-size: 1.75rem; font-weight: 300;">Error Port</summary>
<code>Port</code>: <code>base port</code> + 2</p>
<p>Programs can subscribe to this port to receive driver related errors. The Error port is a <code>ZeroMQ PUSH port</code> that will send you a string with any errors that it has encountered.
</details>
<!-- DATA UPDATE PORT -->
<details open>
<summary style="font-size: 1.75rem; font-weight: 300;">Data Update Port</summary>
<code>Port</code>: <code>base port</code> + 3</p>
<p>This <code>ZeroMQ PUSH port</code> is used by drivers that send data (Humidity, UV, etc.). Each driver uses a different message to report data to programs that subscribe for these updates.</p>
<p>To demonstrate, the UV driver will be used as an example. You can find the file <a href="https://github.com/matrix-io/protocol-buffers/blob/master/matrix_io/malos/v1/sense.proto">here</a>.
The message follows:</p>
<pre><code class="language-protobuf">// Basic UV radiation lecture.
message UV{
  // UV index
  float uv_index = 1;
  // OMS risk
  string oms_risk = 2;
}
</code></pre>

<p>Applications that subscribe to UV driver updates will receive a string with serialized messages of type UV. Once received, the message needs to be deserialized by the application for the values can be used.</p>
</details>

<p><br/></p>
<h2 id="next-steps">Next Steps</h2>
<p>We currently provide libraries and examples for the following languages:</p>
<ul>
<li><a href="../javascript-installation/">Javascript</a></li>
<li><a href="python-installation">Python</a></li>
</ul>
<p>If you want to use another protocol buffer supported programming language then we suggest you view the <a href="https://developers.google.com/protocol-buffers/" target="_blank">Protocol Buffers Documentation</a> for the language you want to use in MATRIX CORE. Remember to use <a href="http://zeromq.org/" target="_blank">ZeroMQ</a> for sending these Protocol Buffers. You can view the protocols for each of our drivers <a href="./../protocols">here</a>.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
